tasks:
  be_run:
    cmd: uv run fastapi dev -e bycco.main:app --reload
    help: run the backend fastapi server
  deploy:
    shell: |
      pushd frontend
      API_URL=https://byccowebsiteprod.ew.r.appspot.com/ yarn generate
      popd
      gcloud app deploy
    help: generate frontend and deploy app on google cloud
  fe_build:
    shell: |
      pushd frontend
      yarn
      popd
  fe_run:
    shell: |
      pushd frontend
      yarn dev
      popd
    help: run yarn dev in frontend
  gcp_init:
    shell: |
      gcloud config configurations activate byccoprod
      gcloud auth application-default login
    help: activate the gcloud byccoprod configuration
  i18n:
    shell: |
      uv run python -m bycco.scripts.i18n
    help: regenerate i18n files
  requirements:
    cmd: uv export --no-hashes --format requirements-txt > src/requirements.txt
    help: create requirements.txt in src directory
shell_interpreter: bash
